## Bookmarklets af Claus Hansen


Her kan du finde de bookmarklets jeg har udviklet igennem tiden. Bare klik på den enkelte bookmarklet og træk linket til din bookmark linje i din browser.

## Generelle værktøjer
Disse bookmarklets er udviklet som forkellige hjælpeværktøjer.
### URL2QR
* <a href="javascript:(function()%7Bvar%20url%3DencodeURI(window.location.href)%2CGoogleQrUrl%3D%22https%3A%2F%2Fchart.googleapis.com%2Fchart%3Fcht%3Dqr%26chl%3D%22%2Burl%2B%22%26chs%3D400x400%22%3Bwindow.open(GoogleQrUrl%2C%22_blank%22)%7D)()">URL2QR</a>

Åbner en ny tab/window med en QR kode til siden

---
## Moodle
Disse bookmarklets er udviklet til moodle.
### Statistik over afleverede opgaver - Opdateret version med filtrering og eksport mulighed

* <a href="javascript:(function()%7Bvar%20s%3Ddocument.createElement(%22script%22)%3Bs.type%3D%22text%2Fjavascript%22%2Cs.src%3D%22https%3A%2F%2Fwww.gstatic.com%2Fcharts%2Floader.js%22%2C%24(%22head%22).append(s)%2CsetTimeout(function()%7Bgoogle.charts.load(%22current%22%2C%7Bpackages%3A%5B%22corechart%22%5D%7D)%2Cgoogle.charts.setOnLoadCallback(drawChart)%7D%2C1e3)%3Bvar%20antalOpgaver%2CantalAfleverede%2Cafleveringsprocent%2Cfilter%2Cstudent%3D%24(%22.page-header-headings%20h2%22).text()%2Copgaveresult%3D%5B%5D%2CalleOpgaver%3D%24(%22.submissionstatustable%22)%3Bfunction%20drawChart()%7Bvar%20e%3Dgoogle.visualization.arrayToDataTable(%5B%5B%22Opgaver%22%2C%22Afleverede%22%5D%2C%5B%22Afleveret%22%2CantalAfleverede%5D%2C%5B%22Ikke%20Afleveret%22%2CantalOpgaver-antalAfleverede%5D%5D)%3Bnew%20google.visualization.PieChart(document.getElementById(%22piechart%22)).draw(e%2C%7Btitle%3A%22Afleveringer%22%2CbackgroundColor%3A%22%23f2f2f2%22%7D)%7Dfunction%20makeInfo()%7BgetData()%3Bvar%20e%3D%22%3Ch4%3E%22%2Bstudent%2B%22%20har%20afleveret%20%22%2BantalAfleverede%2B%22%20ud%20af%20%22%2BantalOpgaver%2B(%22%22!%3D%3Dfilter%3F%22%20filtrerede%22%3A%22%22)%2B%22%20opgaver.%3C%2Fh4%3E%22%3Be%2B%3D%22%3Ch4%3EAfleveringsprocenten%20er%20derfor%20p%C3%A5%20%22%2Bafleveringsprocent%2B%22%25.%3C%2Fh4%3E%22%2Ce%2B%3D%22%3Cb%3EOpgaver%20udf%C3%B8rt%3A%3C%2Fb%3E%3Cbr%3E%22%2Ce%2B%3D%22%3Cul%3E%22%3Bfor(var%20t%3D0%3Bt%3Copgaveresult.length%3Bt%2B%2B)%7Be%2B%3D%22%3Cli%3E%22%3Blet%20a%3D%22Ja%22%3D%3Dopgaveresult%5Bt%5D.afleveret%3F%22green%22%3A%22red%22%3Be%2B%3Dopgaveresult%5Bt%5D.titel%2B'%20%3A%20%3Cb%20style%3D%22color%3A'%2Ba%2B'%22%3E'%2Bopgaveresult%5Bt%5D.afleveret%2B%22%3C%2Fb%3E%22%2Ce%2B%3D%22%3C%2Fli%3E%22%7De%2B%3D%22%3C%2Ful%3E%22%2C%24(%22%23opgaveresult%22).html(e)%7Dfunction%20makeInfoBox()%7Bvar%20e%3D%24('%3Cdiv%20id%3D%22opgaveinfo%22%20class%3D%22col-12%22%3E%3Ch4%20class%3D%22pull-left%22%3EOpgavestatistik%3C%2Fh4%3E%3Cbutton%20id%3D%22filterbtn%22%20class%3D%22btn%20btn-dark%20pull-right%22%3EFilter%3C%2Fbutton%3E%3Cbutton%20id%3D%22exportbtn%22%20style%3D%22margin%3A0%2010px%3B%22%20class%3D%22btn%20btn-dark%20pull-right%22%20title%3D%22Eksporter%20som%20CSV%20fil.%22%3EExport%3C%2Fbutton%3E%3Cp%20style%3D%22clear%3Aboth%3B%22%3EHer%20kan%20du%20f%C3%A5%20en%20overskuelig%20oversigt%20over%2C%20hvilke%20opgaver%20eleven%20har%20afleveret.%3C%2Fp%3E%3C%2Fdiv%3E')%2Ct%3D%24('%3Cdiv%20id%3D%22infotools%22%20style%3D%22display%3Anone%3B%20background-color%3A%23fff%3B%20margin-bottom%3A20px%3B%20padding%3A20px%3B%22%20class%3D%22col-12%22%3E%3Cp%3EBrug%20filteret%20til%20at%20filtrerer%20de%20afleverede%20opgaver.%3C%2Fp%3E%3Cinput%20type%3Dtext%20id%3D%22filter%22%20placeholder%3D%22filtreringstekst%22%20class%3D%22col-12%22%20style%3D%22height%3A%2050px%3B%20font-size%3A%2020px%3B%20border%3A%202px%20solid%3B%20border-radius%3A5px%3B%20text-transform%3Auppercase%22%3E%3C%2Fdiv%3E')%2Ca%3D%24('%3Cdiv%20id%3D%22opgaveresult%22%20class%3D%22col-6%20pull-left%22%3E%3C%2Fdiv%3E%3Cdiv%20id%3D%22piechart%22%20class%3D%22col-6%20pull-right%22%20style%3D%22width%3A%20500px%3B%20height%3A%20500px%3B%22%3E%3C%2Fdiv%3E%3Cdiv%20style%3D%22clear%3Aboth%3B%22%3E%3C%2Fdiv%3E')%3Be.append(t)%2Ce.append(a)%2Ce.css(%7B%22background-color%22%3A%22%23f2f2f2%22%2Cpadding%3A%2220px%22%2C%22margin-bottom%22%3A%2210px%22%7D)%2Ce.insertBefore(%24(%22.page-context-header%22))%7Dfunction%20getData()%7Bopgaveresult%3D%5B%5D%2C%22%22%3D%3D(filter%3D%24(%22%23filter%22).val().toUpperCase())%3F(antalOpgaver%3DalleOpgaver.length%2CantalAfleverede%3D%24(%22.submissionstatussubmitted%22).length)%3A(antalOpgaver%3D0%2CantalAfleverede%3D0)%2C%24(%22.submissionstatustable%22).parent(%22ul%22).prev(%22h4%22).each(function(e)%7Blet%20t%3D%7B%7D%3Bt.titel%3D%24(this).text().toUpperCase()%2Ct.titel%3Dt.titel.replace(%22OPGAVE%3A%22%2C%22%22)%2C%24(alleOpgaver%5Be%5D).find(%22.submissionstatussubmitted%22).length%3C1%3Ft.afleveret%3D%22Nej%22%3At.afleveret%3D%22Ja%22%2C%22%22%3D%3Dfilter%3Fopgaveresult.push(t)%3A%22%22!%3D%3Dfilter%26%26t.titel.includes(filter)%26%26(opgaveresult.push(t)%2CantalOpgaver%2B%2B%2C%22Ja%22%3D%3Dt.afleveret%26%26antalAfleverede%2B%2B)%7D)%2Cafleveringsprocent%3DMath.floor(antalAfleverede%2FantalOpgaver*100)%7Dfunction%20exportToCsv(e%2Ct)%7Bfor(var%20a%3Dfunction(e)%7Bfor(var%20t%3D%22%22%2Ca%3D0%3Ba%3Ce.length%3Ba%2B%2B)%7Bvar%20l%3Dnull%3D%3D%3De%5Ba%5D%3F%22%22%3Ae%5Ba%5D.toString()%3Be%5Ba%5Dinstanceof%20Date%26%26(l%3De%5Ba%5D.toLocaleString())%3Bvar%20r%3Dl.replace(%2F%22%2Fg%2C'%22%22')%3Br.search(%2F(%22%7C%2C%7C%5Cn)%2Fg)%3E%3D0%26%26(r%3D'%22'%2Br%2B'%22')%2Ca%3E0%26%26(t%2B%3D%22%2C%22)%2Ct%2B%3Dr%7Dreturn%20t%2B%22%5Cn%22%7D%2Cl%3D%22%22%2Cr%3D0%3Br%3Ct.length%3Br%2B%2B)l%2B%3Da(t%5Br%5D)%3Bvar%20o%3Dnew%20Blob(%5Bl%5D%2C%7Btype%3A%22text%2Fcsv%3Bcharset%3Dutf-8%3B%22%7D)%3Bif(navigator.msSaveBlob)navigator.msSaveBlob(o%2Ce)%3Belse%7Bvar%20n%3Ddocument.createElement(%22a%22)%3Bif(void%200!%3D%3Dn.download)%7Bvar%20i%3DURL.createObjectURL(o)%3Bn.setAttribute(%22href%22%2Ci)%2Cn.setAttribute(%22download%22%2Ce)%2Cn.style.visibility%3D%22hidden%22%2Cdocument.body.appendChild(n)%2Cn.click()%2Cdocument.body.removeChild(n)%7D%7D%7Dfunction%20Export()%7Blet%20e%3D%5B%5D%3Bfor(e.push(%5B%22Opgave%22%2C%22Afleveret%22%5D)%2Cconsole.log(opgaveresult.length)%2Ci%3D0%3Bopgaveresult.length%3Ei%3Bi%2B%2B)%7Bconsole.log(i)%3Blet%20t%3D%5Bopgaveresult%5Bi%5D.titel%2Copgaveresult%5Bi%5D.afleveret%5D%3Be.push(t)%7DexportToCsv(%22Opgavestatistik-%22%2Bstudent%2B%22.csv%22%2Ce)%7DmakeInfoBox()%2CmakeInfo()%2C%24(%22%23filterbtn%22).click(function(e)%7Be.preventDefault()%2C%24(%22%23infotools%22).toggle(%22slow%22)%7D)%2C%24(%22%23exportbtn%22).click(function(e)%7Be.preventDefault()%2CExport()%7D)%2C%24(%22%23filter%22).keyup(function(e)%7Be.preventDefault()%2CmakeInfo()%2CdrawChart()%7D)%7D)()">Opgave Statistik</a>

Denne bookmarklet laver en hurtig oversigt over de afleverede opgave i Moodle: Betjeningspanel -> Mine kurser ->[Kursus] -> Deltagere -> [Elev] ->Rapporter -> Komplet rapport.

Træk dette link til dine bookmarks og klik på det, når du er på ovenstående side i Moodle. Så vises en overskuelig statistik over elevens afleverede opgaver, i toppen af siden.

---
## Elevplan
Disse bookmarklets er udviklet til elevplan

### Udtræk liste over elever tilstede

* <a href="javascript:(function()%7Bfor(var%20activetab%3Ddocument.querySelector('div%5Bid*%3D%22tabs-%22%5D%3Anot(.ui-tabs-hide')%2Celevrows%3Dactivetab.querySelectorAll('tr%5Bid*%3D%22tabs-%22%5D')%2CexportList%3D%22%22%2Ci%3D0%3Belevrows.length%3Ei%3Bi%2B%2B)%7Blet%20e%3Delevrows%5Bi%5D.cells%2Ct%3De%5B1%5D.childNodes%5B1%5D.title%2B%22%20%22%2Be%5B2%5D.childNodes%5B1%5D.title%2Co%3Delevrows%5Bi%5D.querySelectorAll(%22.ikkegodkendt%22).length%3E0%2Cl%3Delevrows%5Bi%5D.querySelectorAll(%22.godkendt%22).length%3E0%3Bo%7C%7Cl%7C%7C(exportList%2B%3Dt%2B%22%5Cn%22)%7Dfunction%20copyTextToClipboard(e)%7Bvar%20t%3Ddocument.createElement(%22textarea%22)%3Bt.value%3De%2Cdocument.body.appendChild(t)%2Ct.focus()%2Ct.select()%3Btry%7Bvar%20o%3Ddocument.execCommand(%22copy%22)%3Balert(%22Kopieringen%20af%20elevliste%20%22%2B(o%3F%22lykkedes%22%3A%22Fejlede%22))%7Dcatch(e)%7Balert(%22Oops%2C%20unable%20to%20copy%22%2Ce)%7Ddocument.body.removeChild(t)%7Dconsole.log(exportList)%2CcopyTextToClipboard(exportList)%7D)()">Kopier Elevliste</a>

Denne bookmarklet laver en hurtig liste over de elever der er tilstede på elevplan. 

Træk dette link til dine bookmarks og klik på det, når du er på fraværssiden side i elevplan. Så kopieres en liste over eleverne til din udklipsholder.

